{% extends 'layout.html' %}
{% block content %}

<h2 class="mb-4">Admin Dashboard</h2>

<!-- Summary Cards -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="card p-3 shadow-sm">
            <h5>Total Users</h5>
            <h3>{{ users_count }}</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card p-3 shadow-sm">
            <h5>Total Bookings</h5>
            <h3>{{ bookings_count }}</h3>
        </div>
    </div>
</div>

<!-- Admin Actions -->
<div class="mb-4">
    <a href="{{ url_for('view_users') }}" class="btn btn-warning">Manage Users</a>
    <a href="{{ url_for('manage_machines') }}" class="btn btn-primary">Manage Machines</a>
    <a href="{{ url_for('create_demo_slots') }}" class="btn btn-success">Create Slots</a>
    <a href="{{ url_for('view_slots') }}" class="btn btn-info">View Slots</a>
    <a href="{{ url_for('Machine_operator') }}" class="btn btn-dark">Operator Dashboard</a>
</div>

<hr>

<!-- Machines Table -->
<h4 class="mt-4">Machines List</h4>

<table class="table table-bordered table-striped mt-3">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Location</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>

    <tbody>
    {% for m in machines %}
        <tr>
            <td>{{ m.id }}</td>
            <td>{{ m.name }}</td>
            <td>{{ m.location }}</td>
            <td>
                {% if m.status == 'available' %}
                    <span class="badge bg-success">Available</span>
                {% elif m.status == 'in_use' %}
                    <span class="badge bg-warning">In Use</span>
                {% else %}
                    <span class="badge bg-danger">Maintenance</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('delete_machine', machine_id=m.id) }}"
                   class="btn btn-danger btn-sm"
                   onclick="return confirm('Delete this machine? All future slots for this machine will also be deleted!');">
                    Delete
                </a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>


{% endblock %}
